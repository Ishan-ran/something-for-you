<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <title>Immersive Poetry Book</title>
    <style>
        /* =========================================
           1. CORE LAYOUT & MODE STYLES
           ========================================= */
        :root {
            --bg-color: #2c2c2c;
            --accent-color: #8b0000;
            --text-color: #e0e0e0;
        }

        body, html {
            margin: 0; padding: 0; height: 100%; width: 100%;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Georgia', serif;
            overflow: hidden;
        }

        /* --- Loader / Mode Selection Screen --- */
        #loader {
            position: fixed; inset: 0; background: #1a1a1a; z-index: 2000;
            display: flex; align-items: center; justify-content: center;
            flex-direction: column; text-align: center;
            transition: opacity 1s ease-out;
        }

        #modeSelection {
            display: flex; gap: 20px;
            margin-top: 20px;
        }

        .mode-btn {
            padding: 15px 30px;
            background: transparent;
            color: #fff;
            border: 1px solid #dcd0c0;
            cursor: pointer;
            font-family: 'Georgia', serif;
            font-size: 1rem;
            letter-spacing: 1px;
            transition: all 0.3s;
            border-radius: 4px;
        }

        .mode-btn:hover {
            background: #dcd0c0;
            color: #2c2c2c;
            box-shadow: 0 0 15px rgba(220, 208, 192, 0.3);
        }

        .loader-title {
            font-size: 2rem;
            color: #dcd0c0;
            margin-bottom: 10px;
        }

        /* --- Main Layout Architecture --- */
        .main { 
            display: flex; height: 100vh; width: 100vw; 
            opacity: 0; transition: opacity 2s; 
            position: relative; z-index: 10;
        }

        /* PC Layout: Side-by-Side */
        .main.pc-layout { flex-direction: row; }
        .main.pc-layout .left { 
            width: 30%; height: 100%; 
            border-right: 1px solid #444;
            background: rgba(0,0,0,0.2);
        }
        .main.pc-layout .right { 
            width: 70%; height: 100%; 
        }

        /* Phone Layout: Stacked */
        .main.phone-layout { flex-direction: column; }
        
        .main.phone-layout .right { 
            width: 100%; height: 75%; 
            order: 1; 
        }
        
        .main.phone-layout .left { 
            width: 100%; height: 25%; 
            order: 2; 
            border-top: 1px solid #444;
            background: rgba(0,0,0,0.4);
        }

        /* Content containers alignment */
        .left, .right {
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            position: relative;
        }

        /* Info Text in Left Panel */
        .info-panel {
            text-align: center;
            padding: 20px;
            opacity: 0.7;
        }
        .info-panel h2 { font-size: 1.5rem; color: #dcd0c0; margin: 0 0 10px 0; }
        .info-panel p { font-size: 0.9rem; color: #aaa; }

        /* Jump Box Styles */
        .jump-box {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
            background: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 8px;
            pointer-events: auto;
        }
        .jump-box input {
            width: 50px;
            padding: 5px;
            border-radius: 4px;
            border: 1px solid #888;
            background: #eee;
            text-align: center;
        }
        .jump-box button {
            padding: 5px 15px;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        /* =========================================
           2. BOOK & PAGE STYLES
           ========================================= */
        .book {
            position: relative;
            width: 400px; /* Width of ONE closed page */
            height: 550px;
            perspective: 1500px;
            transform-style: preserve-3d;
            transition: transform 1s ease-in-out;
            z-index: 100;
        }

        .book.opened {
            transform: translateX(200px); 
        }

        @media (max-width: 768px) {
            .book { width: 280px; height: 380px; }
            .book.opened { transform: translateX(140px); }
        }
        @media (max-width: 480px) {
            .book { width: 240px; height: 320px; }
            .book.opened { transform: translateX(120px); }
        }

        .page {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            transform-origin: left center;
            transform-style: preserve-3d;
            transition: transform 1.2s cubic-bezier(0.645, 0.045, 0.355, 1);
            cursor: pointer;
            border-radius: 0 5px 5px 0;
        }

        .front, .back {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #fdf5e6;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            padding: 20px;
            box-sizing: border-box;
            backface-visibility: hidden;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
        }

        .front {
            z-index: 2;
            background: linear-gradient(to right, #e3d0b9, #fdf5e6 15%);
            border-radius: 0 5px 5px 0;
            border: 1px solid #dcd0c0;
        }

        .back {
            z-index: 1;
            transform: rotateY(180deg);
            background: linear-gradient(to left, #e3d0b9, #fdf5e6 15%);
            border-radius: 5px 0 0 5px;
            border: 1px solid #dcd0c0;
        }

        .page h1 { color: #8b0000; font-size: 2.2rem; margin-bottom: 10px; text-align: center; }
        .page p { font-size: 1.1rem; line-height: 1.6; color: #4a4a4a; text-align: center; margin: 0; white-space: pre-line; }
        .page-number { position: absolute; bottom: 20px; font-size: 0.8rem; color: #888; }
        
        @media (max-width: 480px) {
            .page h1 { font-size: 1.5rem; }
            .page p { font-size: 0.85rem; }
        }

        /* Cover Specifics */
        .cover-front { background: #ffffff; color: transparent; border: none; }
        .cover-content { position: relative; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .cover-content.hide-text * { display: none; }
        .cover-image { width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; }

        .page.flipped { transform: rotateY(-180deg); }

        /* =========================================
           3. BACKGROUND ANIMATIONS
           ========================================= */
        #hearts-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0; overflow: hidden;
        }

        .heart {
            position: absolute;
            pointer-events: none;
            font-size: 4rem;
            animation: float 6s infinite linear;
            opacity: 0.9;
            filter: drop-shadow(0 0 15px currentColor);
        }
        .heart.red { color: #ff1744; }
        .heart.blue { color: #2196F3; }

        @media (max-width: 768px) { .heart { font-size: 2.5rem; } }

        @keyframes float {
            0% { transform: translateY(100vh) translateX(0) rotate(0deg); opacity: 0.9; }
            100% { transform: translateY(-100vh) translateX(100px) rotate(360deg); opacity: 0; }
        }
    </style>
</head>
<body>

    <div id="loader">
        <div class="loader-title">The Poetry Archives</div>
        <div style="margin-bottom:20px; color:#888;">Select your reading experience</div>
        <div id="modeSelection">
            <button id="btnPhone" class="mode-btn">Phone</button>
            <button id="btnPC" class="mode-btn">PC</button>
        </div>
    </div>

    <audio id="background-song"></audio>

    <div id="hearts-container"></div>

    <div class="main pc-layout" id="main">
        <div class="left">
            <div class="info-panel">
                <h2>Our Story</h2>
                <p>Tap the pages to read.<br>Audio enabled.</p>
                <div class="jump-box">
                    <input type="number" id="pageInput" min="1" max="150" placeholder="#">
                    <button onclick="manualJump()">Go</button>
                </div>
            </div>
        </div>
        <div class="right">
            <div class="book" id="book"></div>
        </div>
    </div>

    <script>
        /* =========================================
           LOGIC: MODE SELECTION & INIT
           ========================================= */
        function startExperience(mode) {
            console.log("Starting in mode:", mode);
            const elem = document.documentElement;
            if (elem.requestFullscreen) {
                elem.requestFullscreen().catch(err => console.log("Fullscreen denied:", err));
            } else if (elem.webkitRequestFullscreen) { elem.webkitRequestFullscreen(); }

            const mainEl = document.getElementById('main');
            mainEl.classList.remove('pc-layout', 'phone-layout');
            
            if (mode === 'phone') {
                mainEl.classList.add('phone-layout');
            } else {
                mainEl.classList.add('pc-layout');
            }

            const loader = document.getElementById('loader');
            loader.style.opacity = '0';
            loader.style.pointerEvents = 'none';

            initializeApp();

            setTimeout(() => {
                loader.style.display = 'none';
                mainEl.style.opacity = '1';
            }, 1000);
        }

        document.getElementById('btnPhone').onclick = () => startExperience('phone');
        document.getElementById('btnPC').onclick = () => startExperience('pc');

        /* =========================================
           LOGIC: THE BOOK & CONTENT
           ========================================= */
        let coverImage = null;

        function initializeApp() {
            loadCoverImage();
            createBook();
            startHearts();
            playMusic();
        }

        /* --- AUDIO LOGIC --- */
        const songs = ['song1.mp3', 'song2.mp3', 'song3.mp3'];
        let currentSongIndex = 0;

        function playMusic() {
            const audio = document.getElementById('background-song');
            audio.src = songs[currentSongIndex];
            audio.volume = 0.5;
            audio.play().catch(err => console.log('Audio autoplay blocked', err));

            audio.onended = function() {
                currentSongIndex = (currentSongIndex + 1) % songs.length;
                playMusic();
            };
        }

        function loadCoverImage() {
            const img = new Image();
            img.src = 'image.jpg';
            img.onload = function() {
                coverImage = 'image.jpg';
                updateCoverImage();
            };
            img.onerror = function() {
                console.log('image.jpg not found, using text cover');
            };
        }

        function createHeart() {
            const heart = document.createElement('div');
            heart.className = `heart ${Math.random() > 0.5 ? 'red' : 'blue'}`;
            heart.innerHTML = '♥';
            
            const startX = Math.random() * window.innerWidth;
            const duration = 6 + Math.random() * 2;
            
            heart.style.left = startX + 'px';
            heart.style.top = '100vh';
            heart.style.animation = `float ${duration}s infinite linear`;
            
            document.getElementById('hearts-container').appendChild(heart);
            setTimeout(() => heart.remove(), duration * 1000);
        }

        function startHearts() {
            setInterval(createHeart, 1200); 
        }

        function updateCoverImage() {
            const coverFront = document.querySelector('.cover-front');
            if(!coverFront) return;
            const coverContent = coverFront.querySelector('.cover-content');
            
            if (coverImage) {
                coverContent.classList.add('hide-text');
                const existingImg = coverFront.querySelector('.cover-image');
                if (existingImg) {
                    existingImg.src = coverImage;
                } else {
                    const img = document.createElement('img');
                    img.className = 'cover-image';
                    img.src = coverImage;
                    coverFront.insertBefore(img, coverContent);
                }
            }
        }

        /* --- POEMS DATA --- */
        const poems = [
          { "title": "Indigo and Ember", "text": "You are the blue of early night,<br>I am the red of morning light.<br>We meet amidst the cocoa sweet,<br>Where cool and burning colors meet." },
          { "title": "The Truffle Hunter", "text": "My blue paws tap the foil ball,<br>Rolling sugar down the hall.<br>You chase the red wrapper’s gleam,<br>Living inside this chocolate dream." },
          { "title": "First Sweetness", "text": "We’ve never shared a day like this,<br>Sealed with a dark and cocoa kiss.<br>Your ginger fur, my coat of slate,<br>Entwined beside the chocolate plate." },
          { "title": "Sapphire Watch", "text": "I watch you from the velvet chair,<br>The scent of sugar in the air.<br>My quiet blue, your fiery start,<br>Melting the corners of my heart." },
          { "title": "Crimson Nudge", "text": "You bring warmth to my cool grey tone,<br>A heat I hadn’t distinct known.<br>We share the treat, we share the space,<br>A red and blue, soft embrace." },
          { "title": "Foil Hearts", "text": "We bat the wrappers, red and gold,<br>A story that is newly told.<br>The chocolate gone, the sweetness stays,<br>In these blue and crimson days." },
          { "title": "Contrast", "text": "Against the rug, your red fur burns,<br>While my blue shadow quietly turns.<br>We balance out the sugar rush,<br>With a soft and steady hush." },
          { "title": "The Box of Sweets", "text": "We sniff the lid of satin red,<br>Thinking of words we haven't said.<br>You are the cherry, I the sea,<br>A perfect, sweet recipe." },
          { "title": "Midnight Snack", "text": "While humans sleep, we prowl the floor,<br>Seeking the treat behind the door.<br>Blue shadows mix with ginger spark,<br>Glowing softly in the dark." },
          { "title": "Azure Calm", "text": "I cool the fire in your eyes,<br>You warm my cold and blue disguise.<br>Like milk and cocoa swirling round,<br>A perfect flavor we have found." },
          { "title": "Red Ribbon Chase", "text": "You catch the string, I catch the bow,<br>The Valentine begins to glow.<br>My blue tail flicks, your red paws pounce,<br>Love measured in the chocolate ounce." },
          { "title": "Melting Point", "text": "You sit so close, I start to thaw,<br>Defying every winter law.<br>Sweet as the candy on the shelf,<br>I lose my blue and lonely self." },
          { "title": "Cocoa Dust", "text": "A smudge of brown on a nose of pink,<br>We pause upon the kitchen sink.<br>Red cat, blue cat, side by side,<br>With nothing left to mask or hide." },
          { "title": "The First Gift", "text": "I didn't know what love could be,<br>Until you shared your warmth with me.<br>A truffle shared, a wrapper torn,<br>A blue and scarlet love is born." },
          { "title": "Ginger Heat", "text": "You radiate like oven heat,<br>Making my blue life complete.<br>We curl around the bonbon box,<br>Secure behind the heavy locks." },
          { "title": "Slate and Strawberry", "text": "The colors clash but feel so right,<br>Under the February light.<br>Sweet cream centers, hard shell coat,<br>We keep each other well afloat." },
          { "title": "Blueberry Night", "text": "I am the shade of closing day,<br>You are the sun that burns away.<br>We meet at dusk to share the prize,<br>Reflected in our feline eyes." },
          { "title": "Unwrapped", "text": "The foil crinkles, loud and bright,<br>Breaking the silence of the night.<br>My blue ears twitch, your red tail sways,<br>In this maze of chocolate days." },
          { "title": "Sugar Rush", "text": "You zoom around in flashes red,<br>While I watch calmly from the bed.<br>The chocolate energy is high,<br>Beneath the winter, lovestruck sky." },
          { "title": "Cool Mint, Hot Spice", "text": "I am the mint, and you the spice,<br>Together we are very nice.<br>A blend of blue and burning red,<br>Resting on the feather bed." },
          { "title": "The Heart Shape", "text": "We sleep into a shape of heart,<br>Determined not to drift apart.<br>Blue tail wraps round leg of flame,<br>Whispering a secret name." },
          { "title": "Sticky Paws", "text": "We found the treats left on the chair,<br>The scent of cocoa in your hair.<br>I lick the sweet from off your fur,<br>Responding with a heavy purr." },
          { "title": "Blue Velvet", "text": "My coat is soft, but yours is bright,<br>Like fire cracking in the night.<br>We guard the chocolates, you and I,<br>Underneath the vaulted sky." },
          { "title": "Scarlet Thread", "text": "You pull the string, I hold the end,<br>My lover and my redness friend.<br>We weave a rug of colored yarn,<br>Safe and warm inside the barn." },
          { "title": "Dark Chocolate Eyes", "text": "Your eyes are deep as cocoa beans,<br>Seeing all my blue routines.<br>I melt beneath your steady gaze,<br>Lost in this romantic maze." },
          { "title": "The Blue Jay", "text": "I saw a bird of my own hue,<br>But I prefer the red of you.<br>Sweetness isn't in the flight,<br>It's here with you this distinct night." },
          { "title": "Ruby Glow", "text": "You shine against the snowy sill,<br>While I sit blue and very still.<br>We watch the world exchange their gifts,<br>While snow outside in silence drifts." },
          { "title": "Taste of Love", "text": "It isn't sugar, isn't cream,<br>It's waking from a lonely dream.<br>To see a red cat by my side,<br>With nowhere left for me to hide." },
          { "title": "The Blue Pillow", "text": "I am the cushion, you the spark,<br>Resting on me in the dark.<br>A chocolate wrapper is our toy,<br>A tiny piece of foil joy." },
          { "title": "Fire and Ice", "text": "They say we shouldn't mix the two,<br>The burning red, the freezing blue.<br>But like a fondue, warm and sweet,<br>We make the perfect, tasty treat." },
          { "title": "Paw Prints in Dust", "text": "We track the sugar on the floor,<br>From the pantry to the door.<br>Blue steps followed by the red,<br>Leading to our cozy bed." },
          { "title": "The Valentine Box", "text": "We sit inside the empty case,<br>A tight and cardboard, cozy space.<br>The chocolates gone, but we remain,<br>Sheltered from the wind and rain." },
          { "title": "Cerulean Purr", "text": "My song is low and deep and blue,<br>Vibrating solely just for you.<br>You answer with a scarlet chirp,<br>Sweet as syrup, void of slurp." },
          { "title": "Russet Glint", "text": "The sun catches your ginger ear,<br>I draw the warmth a little near.<br>No candy bar tastes half as good,<br>As being understood." },
          { "title": "First Touch", "text": "Blue nose touches nose of flame,<br>A feeling that we cannot name.<br>Better than the creamy center,<br>As the season's love we enter." },
          { "title": "Wrapper Cricket", "text": "We bat the foil ball around,<br>A crinkling, happy, tiny sound.<br>Red paws left and blue paws right,<br>Playing through the holy night." },
          { "title": "Deep Water", "text": "I am the ocean, calm and deep,<br>You are the fire that I keep.<br>We float upon a chocolate sea,<br>Just as happy as can be." },
          { "title": "Candy Hearts", "text": "Pastel words upon the rug,<br>I give your ear a gentle tug.<br>Be Mine, it says, in letters bold,<br>A story that is never old." },
          { "title": "The Blue Shadow", "text": "I follow where your brightness goes,<br>Walking on my silent toes.<br>You leave a trail of warmth behind,<br>The sweetest thing that I could find." },
          { "title": "Red Sky at Morning", "text": "You wake me up with nudges warm,<br>Protecting me from any storm.<br>We breakfast on a shared treat,<br>Making the morning very sweet." },
          { "title": "Cobalt Dreams", "text": "I dream of fish and dream of you,<br>In shades of indigo and blue.<br>But you bring color to the sleep,<br>A promise that I mean to keep." },
          { "title": "Chocolate Stain", "text": "A tiny mark upon your chin,<br>Where the feasting did begin.<br>I groom it off with gentleness,<br>A blue and careful, soft caress." },
          { "title": "The Red Scarf", "text": "You tangled in the wool today,<br>In your frantic, playful way.<br>I untied you with patience blue,<br>Because that’s what a love should do." },
          { "title": "Bitter and Sweet", "text": "Life was bitter, cold and stark,<br>Before you lit up all the dark.<br>Now it tastes of ganache cream,<br>Living in this red-blue dream." },
          { "title": "Electric Blue", "text": "My fur stands up when you are near,<br>Not from fright and not from fear.<br>But from the static of our bond,<br>Of which I am so very fond." },
          { "title": "Cinnamon Cat", "text": "You smell of spice and baked desire,<br>A walking, purring, little fire.<br>I cool you down with calming breath,<br>Loyal unto distinct death." },
          { "title": "The Last Piece", "text": "One chocolate left inside the tray,<br>I push it with my paw your way.<br>My blue heart gives the gift to you,<br>Proving that my love is true." },
          { "title": "Twilight Fur", "text": "I blend into the evening air,<br>But you are visible and flare.<br>We are the signal and the ghost,<br>Loving one another most." },
          { "title": "Red Velvet", "text": "Soft as cake and warm as pie,<br>You are the apple of my eye.<br>My blue contrasts your rich design,<br>I'm so glad that you are mine." },
          { "title": "Moonlight and Mars", "text": "I am the moon, you are the planet,<br>Solid as a piece of granite.<br>We orbit round the treat jar lid,<br>Doing things that we were bid." },
          { "title": "Quiet Blue", "text": "I do not speak, I only stare,<br>Sending love into the air.<br>You receive it with a blink,<br>Turning cheeks a shade of pink." },
          { "title": "Caramel Core", "text": "We are hard to crack outside,<br>But soft and sticky on inside.<br>Blue shell, red shell, goo within,<br>Where the loving does begin." },
          { "title": "The Painter's Palette", "text": "If I were paint, and you were too,<br>We'd make a purple, royal hue.<br>But I stay blue and you stay red,<br>Sleeping on the distinct bed." },
          { "title": "Sweet Tooth", "text": "We cannot eat the human stuff,<br>But sniffing it is quite enough.<br>The sugar air fills up the room,<br>Chasing away the winter gloom." },
          { "title": "Frozen Blue", "text": "I was ice before you came,<br>You melted me with just your name.<br>Now I flow like water sweet,<br>Landing softly at your feet." },
          { "title": "Burning Bush", "text": "You hide behind the potted plant,<br>Listening to my lonely chant.<br>You jump out red and scare me good,<br>Just as a funny lover should." },
          { "title": "Cocoa Bean", "text": "Small and dark and full of life,<br>We cut the tension like a knife.<br>Blue paws holding something dear,<br>Keeping all the sweetness near." },
          { "title": "Navy Night", "text": "My coat is dark as ocean deep,<br>Watching you while you are asleep.<br>Your red fur rising with your breath,<br>Scaring off the ghosts of death." },
          { "title": "Cherry Cordial", "text": "You are the fruit inside the sweet,<br>Making my blue life complete.<br>A burst of flavor, tart and bright,<br>Saving me from endless night." },
          { "title": "The Blue Ribbon", "text": "I wear a bow of satin teal,<br>To show you exactly how I feel.<br>You tug it loose with teeth of white,<br>Ending up the formal night." },
          { "title": "Red Rover", "text": "You wander far but come back home,<br>No longer needing to roam.<br>My blue anchor holds you fast,<br>Making sure the good times last." },
          { "title": "Chocolate Milk", "text": "Fluid, creamy, rich and brown,<br>The best feeling in the town.<br>That’s how it feels to sit by you,<br>A mix of red and calming blue." },
          { "title": "Sky and Earth", "text": "I am the air, you are the clay,<br>Together we can make a day.<br>Sweetened by the Valentine,<br>Letting all the stars align." },
          { "title": "Cool Jazz", "text": "My movements slide, my movements flow,<br>I move with rhythm, soft and slow.<br>You add the upbeat, jazzy heat,<br>Making the duet complete." },
          { "title": "Hot Cocoa", "text": "You steam and bubble, warm and nice,<br>Melting all my block of ice.<br>I drink you in with thirsty eyes,<br>Underneath the winter skies." },
          { "title": "The wrapper's song", "text": "Crinkle, crackle, snap and pop,<br>We play until we have to stop.<br>Silver foil and shiny red,<br>Littered round our shared bed." },
          { "title": "Bluebell", "text": "I blossom when you come around,<br>Rising from the frozen ground.<br>You are the sun that makes me grow,<br>In the chocolate afterglow." },
          { "title": "Red Alert", "text": "When danger comes, you stand so tall,<br>Ready to defend it all.<br>My blue hero, fierce and grand,<br>Best protector in the land." },
          { "title": "Sugar Crash", "text": "We played too hard, we ran too fast,<br>The energy was distinct past.<br>Now we pile, blue on red,<br>Sleeping like the distinct dead." },
          { "title": "Turquoise Dream", "text": "A lighter shade of my own heart,<br>Since we made this brand new start.<br>You bleached the dark out of my fur,<br>With your happy, motor purr." },
          { "title": "Mars and Venus", "text": "Planets dancing in the void,<br>By your gravity buoyed.<br>Blue and red in cosmic spin,<br>Let the Valentine begin." },
          { "title": "The Chocolate Chase", "text": "I slide the box across the wood,<br>Doing things I never should.<br>You catch it at the other side,<br>With your mouth open wide." },
          { "title": "Sad Blue No More", "text": "They call it blues when you are down,<br>Wearing a depressive frown.<br>But since you brought your red to me,<br>Blue is happy as can be." },
          { "title": "Spicy Red", "text": "You have a bite, you have a sting,<br>You make the winter morning sing.<br>I soothe the burn with cooling touch,<br>I love you distinct very much." },
          { "title": "Bonbon", "text": "Round and perfect, smooth and fine,<br>Will you be my Valentine?<br>I roll the question on the floor,<br>Waiting for you to adore." },
          { "title": "Steel and Fire", "text": "I am the metal, cold and strong,<br>You are the flame where I belong.<br>We forge a love that cannot break,<br>No matter how the ground may shake." },
          { "title": "Sweet Nothings", "text": "We whisper purrs into the ear,<br>Things that only we can hear.<br>Sweeter than the candy bar,<br>Knowing exactly who we are." },
          { "title": "Blue Ice", "text": "Slippery and hard and cold,<br>Until you made me brave and bold.<br>Now I am water, flowing free,<br>To the red warmth of the sea." },
          { "title": "Valentine Surprise", "text": "I didn't think you'd bring a gift,<br>Giving my spirits such a lift.<br>A feather toy, a chocolate smell,<br>Binding me inside your spell." },
          { "title": "Red Stripes", "text": "Like a tiger, small and cute,<br>Eating the forbidden fruit.<br>My blue stripes are hidden deep,<br>In the secrets that I keep." },
          { "title": "Midnight Blue", "text": "The clock strikes twelve, the day is here,<br>I draw your warm body near.<br>The fourteenth day of cold Feb,<br>Caught inside your loving web." },
          { "title": "Ginger Snap", "text": "You crackle with a sudden energy,<br>A wild and red synergy.<br>I watch you with a bemused eye,<br>My little firefly." },
          { "title": "The Cocoa Tin", "text": "We knocked it down, the powder spread,<br>Dusting us in brown and red.<br>A mess of love and chocolate dirt,<br>Where nobody really got hurt." },
          { "title": "Royal Blue", "text": "I sit with posture like a king,<br>But for you I’d do anything.<br>You are the jester, red and wild,<br>My distinct, chaotic child." },
          { "title": "Strawberry Cream", "text": "Soft and pink and hidden inside,<br>Where the feelings often hide.<br>We break the shell to find the sweet,<br>Making the bonding distinct complete." },
          { "title": "Cool Water", "text": "I quench the thirst you always have,<br>Acting as a healing salve.<br>Blue water on a burning tongue,<br>A song that is forever sung." },
          { "title": "Red Balloon", "text": "My heart floats up when you come in,<br>A defying of the gravity spin.<br>You bat it down to keep it near,<br>My red and grounded, lovely dear." },
          { "title": "Truffle Shuffle", "text": "We dance around the candy pile,<br>With a distinct feline style.<br>Blue paws step and red paws slide,<br>With nothing left to distinct hide." },
          { "title": "Rainy Blue", "text": "It pours outside, but dry in here,<br>With chocolate scent and you so near.<br>The grey is gone, the red is bright,<br>Lighting up the rainy night." },
          { "title": "Ember Glow", "text": "When the fire turns to ash,<br>And the lights begin to flash.<br>You keep the heat inside your fur,<br>A living, breathing, heating purr." },
          { "title": "Peppermint", "text": "Cool and sharp, just like my nose,<br>A winter scent that comes and goes.<br>You are the cinnamon contrast,<br>A flavor that is built to last." },
          { "title": "Blue Collar", "text": "I wear the strap around my neck,<br>A customized and loving spec.<br>You chew it when you think I'm wrong,<br>But I have worn it distinct long." },
          { "title": "Red Rose Petal", "text": "You ate the flower on the table,<br>A distinct and modern fable.<br>I watched you crunch the floral treat,<br>My savage, red, and lovely sweet." },
          { "title": "Dark Roast", "text": "Like coffee black and bitter strong,<br>I waited for you very long.<br>You added sugar, added cream,<br>Waking me from the nightmare dream." },
          { "title": "Denim Blue", "text": "Worn and soft and comfortable,<br>A love that is distinct able.<br>You are the patch of bright red silk,<br>Smooth as a bowl of morning milk." },
          { "title": "Hot Fudge", "text": "Thick and slow and moving heat,<br>Walking on your quiet feet.<br>I am the ice cream, cold and scoop,<br>Together in a tasty loop." },
          { "title": "The Wrapper Sound", "text": "It sounds like rain, it sounds like fire,<br>Feeding our feline desire.<br>Not for the food, but for the game,<br>Of chasing things without a name." },
          { "title": "Blue Mood", "text": "I felt the sadness creeping in,<br>Beneath the fur, beneath the skin.<br>You head-butted the gloom away,<br>With your bright and ginger sway." },
          { "title": "Red Dawn", "text": "The sun comes up to match your coat,<br>A lovely lump inside my throat.<br>To wake beside a fire so bright,<br>After the long and lonely night." },
          { "title": "Melted Heart", "text": "Like chocolate left out in the sun,<br>I am undone, I am undone.<br>My blue defenses flow away,<br>In the light of Valentine's day." },
          { "title": "Sapphire Eyes", "text": "They reflect the room and you,<br>A deep and penetrating blue.<br>You stare back with amber gold,<br>A story waiting to be told." },
          { "title": "Red Hot", "text": "You touch the stove, you touch the wire,<br>Full of curiosity and fire.<br>I pull you back with gentle paw,<br>Enforcing safety's quiet law." },
          { "title": "Sweet Scent", "text": "The house smells like a bakery,<br>Of sugar and of fakery.<br>But we are real, the blue and red,<br>Resting on the feather bed." },
          { "title": "Ocean and Volcano", "text": "I crash against your rocky shore,<br>Wanting less and wanting more.<br>Blue water meets the lava flow,<br>Creating land where love can grow." },
          { "title": "Chocolate Box Fort", "text": "I hide inside the empty square,<br>Vanishing into thin air.<br>You seek me out with instinct bright,<br>My red and clever, hunting light." },
          { "title": "Cornflower Blue", "text": "Gentle as a summer weed,<br>Fulfilling every single need.<br>You are the poppy, bright and red,<br>Growing in our flower bed." },
          { "title": "Cranberry", "text": "Tart and sweet and distinct red,<br>Thoughts inside your little head.<br>I am the bowl that holds you tight,<br>Through the long and winter night." },
          { "title": "Glazed Over", "text": "My eyes go soft when you are near,<br>My vision blurred, but feeling clear.<br>Drunk on the love of red and blue,<br>Stuck like glue to only you." },
          { "title": "Blue Spark", "text": "A tiny snap of static joy,<br>Better than a distinct toy.<br>When red meets blue the energy,<br>Is plain for everyone to see." },
          { "title": "Cherry on Top", "text": "I am the sundae, you the fruit,<br>A distinct and lovely, sweet pursuit.<br>Without you I am just cold cream,<br>Waiting for the waking dream." },
          { "title": "Red Alert II", "text": "The heart beats fast, the tail flicks,<br>Learning all the lover's tricks.<br>My blue pulse slows to calm you down,<br>The calmest cat in all the town." },
          { "title": "Into the Blue", "text": "You dive into my quiet fur,<br>Listening to the motor purr.<br>I wrap around you like the sea,<br>Happy as a cat can be." },
          { "title": "Roasted Nut", "text": "Hard and salty, savory,<br>Hidden in the sweet bravery.<br>We found the center of the treat,<br>Beneath the covers and the sheet." },
          { "title": "Blue Moon", "text": "It happens only once a while,<br>That I can crack a feline smile.<br>But you make blue moons every day,<br>In your specific ginger way." },
          { "title": "Red Carpet", "text": "You walk as if you own the place,<br>With elegance and feline grace.<br>I watch from shadows, dark and blue,<br>Admiring the view of you." },
          { "title": "Sweet Tooth II", "text": "I saw you lick the wrapper clean,<br>The sweetest tongue I've ever seen.<br>You tasted chocolate, I taste love,<br>Sent from the stars up above." },
          { "title": "Deep Space Blue", "text": "Endless, dark, and full of stars,<br>Healing all my olden scars.<br>You are the comet, burning red,<br>Streaking through my distinct head." },
          { "title": "Valentine Morning II", "text": "The sun hits blue, the sun hits red,<br>Illuminating our shared bed.<br>The first of many days to come,<br>Beating like a steady drum." },
          { "title": "Chocolate River", "text": "Imagine swimming in the sweet,<br>With sticky paws and sticky feet.<br>We'd float together, side by side,<br>With nothing left to distinct hide." },
          { "title": "Blue Steel", "text": "Unbending, tough, and very cool,<br>Until I met you by the pool.<br>You rusted me with tears of joy,<br>My red and happy, lovely boy." },
          { "title": "Red Flare", "text": "A signal sent into the dark,<br>Searching for a missing spark.<br>I answered with a signal blue,<br>Coming distinct home to you." },
          { "title": "Sweet Dreams", "text": "Close your eyes, my ginger friend,<br>The day has reached its lovely end.<br>Dream of mice made out of cake,<br>Until the morning when we wake." },
          { "title": "Blue Note", "text": "A sad song played on saxophone,<br>Before I claimed you as my own.<br>Now the music swings and hops,<br>And the dancing never stops." },
          { "title": "Red Letter Day", "text": "Mark the calendar in ink,<br>Don't let the memory distinct sink.<br>The day the blue cat met the fire,<br>And found his only heart's desire." },
          { "title": "Caramel Swirl", "text": "Mixing colors, mixing scent,<br>Time together, distinct spent.<br>Blue and red and sticky sweet,<br>Knocking me right off my feet." },
          { "title": "Winter Blue", "text": "The frost is biting at the glass,<br>Waiting for the cold to pass.<br>But here inside the red is warm,<br>Protecting me from distinct storm." },
          { "title": "Heartbeat", "text": "I feel it when we cuddle tight,<br>Thumping in the silent night.<br>Your red heart beats against my blue,<br>A rhythm that is distinct true." },
          { "title": "Wrapper Crinkle", "text": "The noise that wakes us from a nap,<br>A shiny, silver, distinct trap.<br>We investigate with nose and paw,<br>Obeying curiosity's law." },
          { "title": "Blue Sky", "text": "No clouds today, just open space,<br>Reflected on your happy face.<br>You are the kite, the red delight,<br>Flying in the morning light." },
          { "title": "Red Heat", "text": "You radiate across the room,<br>Dispelling all the distinct gloom.<br>I bask within your ginger glow,<br>The only warmth I need to know." },
          { "title": "Chocolate Fondue", "text": "Dipping paws into the pot,<br>Finding out it’s distinct hot.<br>We lick the sweetness off the fur,<br>Ending with a sticky purr." },
          { "title": "Blue Forever", "text": "I promise to be calm and true,<br>A steady shade of loving blue.<br>If you will be my burning red,<br>Until the very distinct end." },
          { "title": "The Last Chocolate", "text": "We saved the best one for the last,<br>A memory of the distinct past.<br>We share the bite, we share the bliss,<br>Ending with a chocolate kiss." },
          { "title": "Red and Blue Knot", "text": "Tangled limbs and tangled tails,<br>A ship that has lowered sails.<br>We drift together, distinct slow,<br>In the Valentine's soft glow." },
          { "title": "Sweet Silence", "text": "No meows, just breathing deep,<br>Falling into distinct sleep.<br>Blue and red and chocolate scent,<br>The distinct way the day was spent." },
          { "title": "First Valentine Night", "text": "The moon is high, the day is done,<br>But we have only just begun.<br>Blue cat, Red cat, love is new,<br>Stuck together like the glue." }
        ];

        function createBook() {
            const bookContainer = document.getElementById('book');
            bookContainer.innerHTML = ''; 
            const totalSheets = Math.ceil(poems.length / 2);

            for (let i = 0; i < totalSheets; i++) {
                const sheet = document.createElement('div');
                sheet.className = 'page';
                sheet.style.zIndex = 1000 - i;
                sheet.dataset.index = i;
                
                // Front
                const front = document.createElement('div');
                front.className = 'front';
                const frontPoem = poems[i * 2];
                
                if (i === 0) {
                    front.classList.add('cover-front');
                    const coverContent = document.createElement('div');
                    coverContent.className = 'cover-content';
                    coverContent.innerHTML = `<h1>${frontPoem.title}</h1><p>${frontPoem.text}</p>`;
                    front.appendChild(coverContent);
                } else {
                    front.innerHTML = `<p><strong>${frontPoem.title}</strong><br><br>${frontPoem.text}</p><span class="page-number">${i * 2}</span>`;
                }

                // Back
                const back = document.createElement('div');
                back.className = 'back';
                const backPoem = poems[i * 2 + 1];
                if (backPoem) {
                    back.innerHTML = `<p><strong>${backPoem.title}</strong><br><br>${backPoem.text}</p><span class="page-number">${i * 2 + 1}</span>`;
                } else {
                    back.innerHTML = `<p>The End</p>`;
                }

                sheet.appendChild(front);
                sheet.appendChild(back);
                
                sheet.onclick = function() { toggleFlip(this, i, totalSheets); };
                bookContainer.appendChild(sheet);
            }
            if(coverImage) updateCoverImage();
        }

        function toggleFlip(sheet, index, totalSheets) {
            const book = document.getElementById('book');
            
            if (index === 0 && !sheet.classList.contains('flipped')) {
                book.classList.add('opened');
            }
            if (index === 0 && sheet.classList.contains('flipped')) {
                book.classList.remove('opened');
            }

            if (sheet.classList.contains('flipped')) {
                sheet.classList.remove('flipped');
                sheet.style.zIndex = 1000 - index;
            } else {
                sheet.classList.add('flipped');
                sheet.style.zIndex = 500 + index; 
            }
        }

        /* --- JUMP BOX LOGIC --- */
        function manualJump() {
            const input = document.getElementById('pageInput');
            const pageNum = parseInt(input.value);
            const totalSheets = Math.ceil(poems.length / 2);

            if (isNaN(pageNum) || pageNum < 1 || pageNum > 150) {
                alert("Please enter a number between 1 and 150.");
                return;
            }

            // Calculate which sheet needs to be topmost (unflipped) for the requested page
            // Logic:
            // Page 1 (Cover back): Sheet 0 Flipped
            // Page 2 (Sheet 1 Front): Sheet 0 Flipped
            // Page 3 (Sheet 1 Back): Sheet 0 Flipped, Sheet 1 Flipped
            // ...
            
            const sheetsToFlip = Math.ceil(pageNum / 2);
            
            // Loop through all sheets and set state
            const sheets = document.querySelectorAll('.page');
            const book = document.getElementById('book');
            
            // Handle book open state
            if (pageNum > 0) {
                book.classList.add('opened');
            } else {
                book.classList.remove('opened');
            }

            sheets.forEach((sheet, i) => {
                if (i < sheetsToFlip) {
                    // Must be FLIPPED (Left Side)
                    sheet.classList.add('flipped');
                    sheet.style.zIndex = 500 + i;
                } else {
                    // Must be UNFLIPPED (Right Side)
                    sheet.classList.remove('flipped');
                    sheet.style.zIndex = 1000 - i;
                }
            });
        }
    </script>
</body>
</html>